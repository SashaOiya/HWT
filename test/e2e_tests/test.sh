#!/bin/bash

if [ $# -lt 2 ]; then
    echo "‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 <–ø—É—Ç—å_–∫_–±–∏–Ω–∞—Ä–Ω–∏–∫—É> <–ø—É—Ç—å_–∫_–ø–∞–ø–∫–µ_—Å_—Ç–µ—Å—Ç–∞–º–∏>"
    exit 1
fi

avl="$1"      # –ü—É—Ç—å –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É avl
set="$2"      # –ü—É—Ç—å –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É set
data_dir="$3"  # –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –¥–∞–Ω–Ω—ã–º–∏

if [ ! -d "$data_dir" ]; then
    echo "‚ùå –ü–∞–ø–∫–∞ $data_dir –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
    exit 1
fi

files=("$data_dir"/*.txt)

for file in "${files[@]}"; do 
    echo "üìÇ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞: $file"

    echo "üî¢ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–µ—Ä–µ–≤—å–µ–≤:"
    
    result=$( "$avl" < "$file" )  # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    expected=$( "$set" < "$file" )  # –ß–∏—Ç–∞–µ–º –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

    echo "üîπ –†–µ–∑—É–ª—å—Ç–∞—Ç AVL: $result"
    echo "üîπ –û–∂–∏–¥–∞–ª–æ—Å—å SET: $expected"

    if [ "$result" == "$expected" ]; then
        echo "‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω!"
    else
        echo "‚ùå –û—à–∏–±–∫–∞!"
        exit 1
    fi
    echo "-----------------------------------"
done
